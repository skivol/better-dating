[English README](https://github.com/skivol/better-dating/blob/master/README_en.md)

# Хранилище кода для сайтов [смотрины.укр](https://смотрины.укр) и [смотрины.рус](https://смотрины.рус)

Саморазвитие, Свидания/Отношения, создание Семьи

## Описание текущих функций сайта "Смотрины"

(дальнейшие планы разработки изложены в [tasks.md](https://github.com/skivol/better-dating/blob/master/docs/tasks.md))

### Описание идеи / обратная связь

[Предложение](https://смотрины.укр/предложение)

### [Регистрация](https://смотрины.укр/регистрация)

- сохранение прогресса заполнения формы в локальном хранилище с возможностью его очистить.

### [Политика конфиденциальности](https://смотрины.укр/политика-конфиденциальности)

### [Пользовательское соглашение](https://смотрины.укр/пользовательское-соглашение)

### Подтверждение почты

- а также возможность получить еще раз токен для подтверждения почты в случае просроченного предыдущего токена.

### [Вход в учетную запись](https://смотрины.укр/вход)

- одновременно с подтверждением почты;
- с помощью одноразового токена, отправляемого на почту;
- с помощью профиля в социальных сетях [Facebook](https://facebook.com/) и [Вконтакте](https://vk.com/).

![Окно Входа](/docs/images/login.png)

### Просмотреть / обновить / удалить / проанализировать собственный профиль

При изменении почты, должно быть отправлено письмо на предыдущий адрес, а новая почта должна быть снова проверена.
Некоторые данные имеют историю сохранений (рост / вес / частота действий / оценка профиля).

Пример анализа ИМТ:

![Пример анализа ИМТ](/docs/images/bmi-analysis-example.png)

### Активировать второй этап

Меню профиля -> Перейти к следующему этапу (становится доступным при заполнении всей информации запрашиваемой на первом этапе).
![Меню Профиля](/docs/images/profile-menu.png)

#### Диалог активации второго этапа:

![Диалог Активации Второго Этапа](/docs/images/second-stage-activation-dialog.png)
![Диалог Активации Второго Этапа 2](/docs/images/second-stage-activation-dialog-2.png)

### Алгоритм автоматизированного подбора пар (для цели "Поиск второй половинки")

- пользователи имеют подтвержденные эл. почтовые адреса;
- пользователи участвуют в автоматизированном подборе пар;
- пользователи _не_ находятся сейчас в активной паре;
- участники разного пола;
- из одной ИМТ категории;
- возраст - участник мужского пола может быть в пределах 7 лет старше или на 2 года младше участницы женского пола;
- рост - участник мужского пола может быть (в пределах) 25 см выше или 5 см ниже участницы женского пола;
- намерения в связи с привычками связанными с никотином, алкоголем, просмотром порнографии и внесемейными интимными отношениями должны совпадать (т.е., пользователи могут обое не собираться ими заниматься в будущем либо заниматься в той или иной мере; в случае если участник не определился, то он/она могут составить пару с кем угодно по этому параметру);
- единый тип внешности;
- из одного и того же населенного пункта (для облегчения организации свидания, в начальной версии);
- родной или один/несколько из родных языков должны совпадать;
- обработка в порядке регистрации.

В коде эту логику можно увидеть в [файле PairMatcherTask.kt](/blob/master/better-dating-backend/src/main/kotlin/ua/betterdating/backend/tasks/PairMatcherTask.kt) и [PairsRepository.kt](/blob/master/better-dating-backend/src/main/kotlin/ua/betterdating/backend/data/PairsRepository.kt).

### Посмотреть сформированные пары / организованные свидания

С помощью пользовательского меню _"Пары и Свидания"_ можно посмотреть соответствующую информацию.

![Пары и Свидания](/docs/images/pairs-and-dates__scheduled_date.png)

![Что дальше ?](/docs/images/whats-next.png)

### Посмотреть / проанализировать профиль участника с кем была сформирована пара

При формировании пары создаются одноразовые ссылки для просмотра профилей друг друга которые присылаются по почте. Также можно получить дополнительную ссылку выбрав пункт меню пары _"Посмотреть профиль ..."_.

![Меню Пары](/docs/images/pair-menu.png)

### Действия связанные со свиданием

- _Я на месте_ - пункт для того чтобы отметиться о прибытии на свидание;
- _Подтвердить свидание_ - предоставляет возможность ввести код подтверждения свидания полученный другим пользователем;
- _Оценить профиль_ - оценка правдивости, предложения по улучшению профиля / а также посмотреть соответствующую оценку своего профиля;
- _Не получается прийти_ - действия на случай невозможности прибытия на свидание.

![Меню Свидания](/docs/images/date-menu.png)

### Решение по паре

Добавить _Решение_ по паре можно с помощью соответствующего пункта меню пары, при наличии как минимум одного проверенного свидания.

![Диалог Решения](/docs/images/pair-decision.png)

### Добавление / подтверждение / просмотр места встречи

В случае если нет доступного места (в соответствующем населенном пункте) и свободного слота времени для автоматизированной организации свидания, то предоставляется возможность добавить место встречи, которое должен проверить и подтвердить второй пользователь.

![Статус свидания где нужно предложить место встречи](/docs/images/add-place-status.png)

![Добавление места встречи](/docs/images/add-dating-place.png)

### Просмотр событий

Есть также возможность посмотреть _события_ (пункт в пользовательском меню) связанные с профилем, например, его просмотры другими пользователями.

![Пользовательское Меню](/docs/images/user-menu.png)

### Посмотреть / проанализировать профиль автора системы

### Страница администратора

- статистика по общему количеству зарегистрированных профилей, а также их удалений;
- возможность отправить тестовое письмо;
- возможность проверить геолокацию.

### Выход из учетной записи

## Нефункциональные требования

- Шифрование при передаче (https) и хранении данных (Windows BitLocker, Linux Luks);
- SEO (Sitemap.xml, мета тэги);
- SSR (стили, иконки, серверная навигация);
- Поддержка офлайн работы.

## Технологии

Использованные технологии упоминаются на странице [благодарности](https://смотрины.укр/благодарности), языки программирования в секции "Languages" на текущей странице.

## Разработка

- Docker
- Postgres - `bd-database-docker-build`, `bd-db-run` в [dev-aliases.sh](https://github.com/skivol/better-dating/blob/master/scripts/dev-aliases.sh);
- Redis - `bd-cache-docker-build`, `bd-cache-run`;
- Браузерное приложение - `bd-ui-server`;
- Нужно создать `.env-dev` в корне проекта из `.template-env` и заполните значения переменных;
- Добавьте `.db-password` и `.mail-password`;
- Скачайте [skivol/spring-fu](https://github.com/skivol/spring-fu) и запустите `spring-fu-publish-to-local`;
- Серверное приложение - `bd-backend-server` (эта команда запускает сервер без интеграции с почтовым сервисом, вместо этого письма будут выводиться в консоль);
- Приложение должно быть доступно по ссылке http://localhost:3000/.

## Помощь

Помощь приветствуется в форме:

- предложений по улучшению функций сайта и информации изложенной на нём;
- распространения и использования информации присутствующей на сайте, желательно с упоминанием источника;
- прочих действий способствующих благотворному развитию идей и целей обозначенных на сайте.

## [Лицензия](https://github.com/skivol/better-dating/blob/master/LICENSE)
